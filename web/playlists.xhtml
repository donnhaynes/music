<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
      xmlns:p="http://primefaces.org/ui"
      xmlns:f="http://xmlns.jcp.org/jsf/core">    
    <h:body>        
        <ui:composition template="common.xhtml">            
            <ui:define name = "content">
                <h:form id="form" style="margin-top: 25px">
                    <div class='row'>
                        <div class="col-sm-3">
                            <p:dataTable var="playlist" value="#{playlistsLazyView.lazyModel}" paginator="true" rows="10"
                                         paginatorPosition="bottom"
                                         paginatorTemplate="{RowsPerPageDropdown} {FirstPageLink} {PreviousPageLink} {CurrentPageReport} {NextPageLink} {LastPageLink}"
                                         rowsPerPageTemplate="10,20,30" selectionMode="single" selection="#{playlistsLazyView.selectedPlaylist}" id="playlistsTable" lazy="true">       
                                <p:ajax event="rowSelect" listener="#{playlistsLazyView.onRowSelect}" update=":form:playlistDetail"/>
                                <p:column headerText="Name">
                                    <h:outputText value="#{playlist.name}" />
                                </p:column>
                                <p:column headerText="Songs">
                                    <h:outputText value="#{playlist.songs.size()}"/>
                                </p:column>   
                                <p:column>
                                    <p:commandButton value="Delete" id="ajax" update=":form" actionListener="#{playlistsLazyView.deletePlaylist(playlist)}" styleClass="ui-priority-primary" onclick="PF('dlg2').show();"/>                            
                                </p:column>
                            </p:dataTable>   
                        </div>
                        <div class="col-sm-3">
                            <p:outputPanel id="playlistDetail">
                                <h2>  <h:outputText value="#{playlistsLazyView.selectedPlaylist.name}" /></h2>
                                <ul>
                                    <ui:repeat var="song" value="#{playlistsLazyView.selectedPlaylist.songs}" varStatus="status">                               
                                        <li><h:outputText value="#{song.name}"/></li>
                                    </ui:repeat>
                                </ul>
                            </p:outputPanel>
                        </div>
                    </div>
                </h:form>
            </ui:define>            
        </ui:composition>
    </h:body>
</html>